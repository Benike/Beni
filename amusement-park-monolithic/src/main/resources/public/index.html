<!DOCTYPE html>
<html>
<head>
<title>Beni</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" type="text/css"
	href="/webjars/bootstrap/css/bootstrap.min.css" />
<script type="text/javascript" src="/webjars/jquery/jquery.min.js"></script>
<script type="text/javascript"
	src="/webjars/bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="/index.js"></script>
</head>
<body onload="init()">
<div id="header" class="row" style="background-color: lime; display: none">
		<div class="col-md-2"></div>
		<div class="col-md-6 row">
			<div class="col-md-4 row">
				Username:&nbsp;
				<p id="username"></p>
			</div>
			<div id="spendingMoneyDiv" class="col-md-4 row">
				Spending money:&nbsp;
				<p id="spendingMoney"></p>
			</div>
		</div>
		<div class="col-md-4">
			<form id="logout" method="post">
				<input type="submit" value="logout">
			</form>
		</div>
	</div>
<div id="content" style="display: none">
	<div class="jumbotron text-center">
		<h1>Welcome to Beni</h1>
	</div>
	<div id=loginDiv class="text-center" >
		Username: <input id="loginUsername" type="text"> <br> 
		Password: <input id="password" type="password"> <br>
		<input type="button" onclick="login()" value="Login">
		<input type="button" onclick="showSignUp()" value="Sign Up">
	</div>
	<div id="signUpDiv" class="text-center" style="display: none">
		Username: <input id="signUpUsername" type="text"> <br> 
		Password: <input id="signUpPassword" type="password"> <br> 
		Confirm password: <input id="signUpConfirmPassword" type="password"> <br>
		Name: <input id="name" type="text"> <br>
		Date of birth: <input id="dateOfBirth" type="text"> <br> 
		<input id="signUp" type="button" onclick="signUp()" value="Sign up"> 
		<p id="signUpError"></p>
	</div>
	<script>
		function login() {
			$.ajax({
				url : links.login,
				method : "POST",
				data : "username="+$("#loginUsername").val() + "&password=" + $("#password").val(),
				success : function (data) {
					data = JSON.parse(data)
					$("#content").hide()
					setUsernameAndAuthorityAndSpendingMoney(data)
					getAmusementParkPage()
				}
			})
		}
		
		function showSignUp() {
			$("#loginDiv").hide()
			$("#signUpDiv").show()
		}
		
		function signUp() {
			$("#signUp").prop("disabled", true)
			$.ajax({
				url : links.signUp,
				method : "POST",
				contentType : "application/json",
				data : JSON.stringify(collectSignUpData()),
				success : function (data) {
					$("#content").hide()
					setUsernameAndAuthorityAndSpendingMoney(data)
					getAmusementParkPage()
				},
				error : function (data) {
					$("#signUpError").html(data.responseText)
					$("#signUp").prop("disabled", false)
				}
			})
		}
		
		function collectSignUpData(){
			var user = {}
			user.username = $("#signUpUsername").val()
			user.password = $("#signUpPassword").val()
			user.confirmPassword = $("#signUpConfirmPassword").val()
			user.dateOfBirth = $("#dateOfBirth").val()
			user.name = $("#name").val()
			return user
		}
		
	</script>
</div>
</body>
</html>